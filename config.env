############################################################
# GLOBAL / ENVIRONMENT
############################################################
ENV_NAME=onprem
TIMEZONE=Asia/Kolkata

############################################################
# INSTALLATION ROOT
############################################################
INSTALL_DIR=/opt/pathflowdx

############################################################
# APPLICATION (MAIN APP CONTAINER)
############################################################
APP_NAME=pathflowdx
APP_IMAGE=onwardassist/pathflowdx:onprem-cro-1.0.21
APP_CONTAINER_NAME=pathflowdx_app
APP_PORT=8080
APP_RESTART_POLICY=unless-stopped

APP_USERNAME=onwardassist
APP_PASSWORD="replace me"

ORG_ID=2
MAXIMUM_SESSIONS=10
LIST_OF_HOSTNAMES=

############################################################
# LOG PATHS
############################################################
LOG_BASE_DIR=/onward/logs
APP_LOG_DIR=/onward/logs/onward
DZI_LOG_DIR=/onward/logs/dzi-worker
MINIO_LOG_DIR=/onward/logs/minio

APP_LOG_FILE=/logs/onward/onward.log
APP_LOG_PATTERN=/logs/onward/onward-%d{yyyy-MM-dd}.log
DZI_LOG_FILE=/logs/dzi-worker/dzi.log

############################################################
# DATABASE (POSTGRES)
############################################################
DB_TYPE=postgres
DB_IMAGE=postgres:11
DB_CONTAINER_NAME=pathflowdx_db

DB_NAME=ansible_test_db
DB_USER=postgres
DB_PASSWORD=Onward#test
DB_PORT=5432

DB_VOLUME_NAME=psql-volume1
DB_RESTART_POLICY=unless-stopped

############################################################
# SPRING BOOT DATABASE CONFIG
############################################################
SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/ansible_test_db
SPRING_DATASOURCE_USERNAME=postgres
SPRING_DATASOURCE_PASSWORD=Onward#test
SPRING_DATASOURCE_INIT_MODE=ALWAYS

############################################################
# MINIO (OBJECT STORAGE)
############################################################
MINIO_IMAGE=minio/minio:RELEASE.2022-05-26T05-48-41Z.hotfix.204b42b6b
MINIO_CONTAINER_NAME=pathflowdx_minio

MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=minio_onward

MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_SSL_PORT=9009

MINIO_BUCKET=pathflowdx-dev_ansible_test

MINIO_DATA_DIR=/data/minio
MINIO_CERTS_DIR=/home/s60-pathflow/.minio/certs
MINIO_CONFIG_DIR=./onward/minio-config

MINIO_SERVER_URL=http://192.168.1.7:9000
MINIO_API_CORS=http://192.168.1.7:8080

MINIO_PROMETHEUS_ENABLED=true
MINIO_PROMETHEUS_PORT=9001
MINIO_PROMETHEUS_URL=http://192.168.1.7:9090
MINIO_PROMETHEUS_JOB_ID=minio-job

############################################################
# DZI WORKER
############################################################
DZI_IMAGE=onwardassist/dzi-generic-ica:0.1.0-beta7
DZI_CONTAINER_NAME=pathflowdx_dzi

DZI_USERNAME=onwardassist
DZI_PASSWORD=

DZI_BASE_URL=http://192.168.1.7:8080
DZI_STORAGE_TYPE=minio

DZI_QUEUE_TYPE=app
DZI_INFINITE_LOOP=true
DZI_CALCULATE_FILES=true

############################################################
# MINIO ACCESS (USED BY APP & DZI)
############################################################
AWS_ACCESS_KEY_ID=minio
AWS_SECRET_ACCESS_KEY=minio_onward
AWS_DEFAULT_REGION=
AWS_REGION=

AWS_ENDPOINT=http://192.168.1.7:9000
#AWS_BUCKET=pathflowdx-dev

MINIO_ALIAS=dzi-minio
MINIO_ENDPOINT_REPLACEMENT=http://192.168.1.7:9000
MINIO_STATS_API=http://192.168.1.7:9000

############################################################
# EXTERNAL / API CONFIG
############################################################
API_KEY="replace megit config --global --unset credential.helper"
DEFAULT_LOGO=/images/page-logo.png

############################################################
# NGINX / DOMAIN / SSL
############################################################
NGINX_SERVER_NAME=192.168.1.7

NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

ENABLE_SSL=true
CERTBOT_EMAIL=admin@pathflowdx.com

############################################################
# NGINX ADVANCED SETTINGS
############################################################
# Client upload settings
NGINX_CLIENT_MAX_BODY_SIZE=0
NGINX_PROXY_REQUEST_BUFFERING=off
NGINX_PROXY_BUFFERING=off
NGINX_PROXY_MAX_TEMP_FILE_SIZE=0

# Proxy timeout settings (in seconds)
NGINX_PROXY_CONNECT_TIMEOUT=600
NGINX_PROXY_SEND_TIMEOUT=600
NGINX_PROXY_READ_TIMEOUT=600

# Log file paths
NGINX_ACCESS_LOG=/var/log/nginx/pathflowdx_access.log
NGINX_ERROR_LOG=/var/log/nginx/pathflowdx_error.log
NGINX_MINIO_ACCESS_LOG=/var/log/nginx/pathflowdx_minio_access.log
NGINX_MINIO_ERROR_LOG=/var/log/nginx/pathflowdx_minio_error.log

# CORS settings for MinIO
NGINX_CORS_ALLOW_METHODS="GET, POST, PUT, DELETE, OPTIONS"
NGINX_CORS_MAX_AGE=3600

############################################################
# DOCKER NETWORK
############################################################
DOCKER_NETWORK_NAME=onward-network
DOCKER_NETWORK_DRIVER=bridge


############################################################
# DOCKER REGISTRY (OPTIONAL)
############################################################
DOCKER_REGISTRY=docker.io
DOCKER_USERNAME=
DOCKER_PASSWORD=

############################################################
# DOCKER DEPLOYMENT CONTROLS
############################################################
DOCKER_COMPOSE_PULL=true
DOCKER_FORCE_REBUILD=false


############################################################
# SSH ACCESS
############################################################
SSH_PORT=22
SSH_USER=afridshaik
SSH_KEYS_DIR=/opt/ssh_keys

############################################################
# BACKUPS (DATABASE & LOGS)
############################################################
BACKUP_BASE_DIR=/backup

# Database backup configuration
DB_BACKUP_DIR=/backup/db
DB_BACKUP_RETENTION_DAYS=7
DB_BACKUP_TIME=02:00
DELETE_DB_BACKUPS_AFTER_RETENTION=true

# Log backup configuration
LOG_BACKUP_DIR=/backup/logs
LOG_BACKUP_RETENTION_DAYS=14
LOG_BACKUP_TIME=02:30
DELETE_LOG_BACKUPS_AFTER_RETENTION=true

############################################################
# FIREWALL
############################################################
ENABLE_FIREWALL=false


