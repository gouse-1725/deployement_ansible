############################################################
# GLOBAL / ENVIRONMENT
############################################################
ENV_NAME=onprem
TIMEZONE=Asia/Kolkata

############################################################
# INSTALLATION ROOT
############################################################
INSTALL_DIR=/opt/pathflowdx

############################################################
# APPLICATION (MAIN APP CONTAINER)
############################################################
APP_NAME=pathflowdx
APP_IMAGE=onwardassist/pathflowdx:onprem-cro-1.0.21
APP_CONTAINER_NAME=pathflowdx_app
APP_PORT=8080
APP_RESTART_POLICY=unless-stopped

APP_USERNAME=onwardassist
APP_PASSWORD=OnDock%^9shd

ORG_ID=1
MAXIMUM_SESSIONS=10
LIST_OF_HOSTNAMES=

############################################################
# LOG PATHS
############################################################
LOG_BASE_DIR=/data/logs
APP_LOG_DIR=/data/logs/pathflow_application
DZI_LOG_DIR=/data/logs/dzi-worker
MINIO_LOG_DIR=/data/logs/minio

APP_LOG_FILE=/logs/pathflow_application/app.log
APP_LOG_PATTERN=/logs/pathflow_application/app-%d{yyyy-MM-dd}.log
DZI_LOG_FILE=/logs/dzi-worker/dzi.log

############################################################
# DATABASE (POSTGRES)
############################################################
DB_TYPE=postgres
DB_IMAGE=postgres:11
DB_CONTAINER_NAME=pathflowdx_db

DB_NAME=testing_db
DB_USER=postgres
DB_PASSWORD=Onward#test
DB_PORT=5432

DB_VOLUME_NAME=psql-volume2
DB_RESTART_POLICY=unless-stopped

############################################################
# SPRING BOOT DATABASE CONFIG
############################################################
SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/testing_db
SPRING_DATASOURCE_USERNAME=postgres
SPRING_DATASOURCE_PASSWORD=Onward#test
SPRING_DATASOURCE_INIT_MODE=ALWAYS

############################################################
# MINIO (OBJECT STORAGE)
############################################################
MINIO_IMAGE=minio/minio:RELEASE.2022-05-26T05-48-41Z.hotfix.204b42b6b
MINIO_CONTAINER_NAME=pathflowdx_minio

MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=minio_onward

MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_SSL_PORT=9009

MINIO_BUCKET=pathflowdxtest

MINIO_DATA_DIR=/data/minio
MINIO_CERTS_DIR=/etc/minio/s60-pathflow/.minio/certs
MINIO_CONFIG_DIR=/etc/minio/minio-config

MINIO_SERVER_URL=https://dss.pathflowdx.com:9009
MINIO_API_CORS=https://dss.pathflowdx.com

MINIO_PROMETHEUS_ENABLED=true
MINIO_PROMETHEUS_PORT=9001
MINIO_PROMETHEUS_URL=https://dss.pathflowdx.com:9090
MINIO_PROMETHEUS_JOB_ID=minio-job

############################################################
# DZI WORKER
############################################################
DZI_IMAGE=onwardassist/dzi-generic-ica:0.1.0-beta7
DZI_CONTAINER_NAME=pathflowdx_dzi

DZI_USERNAME=onwardassist
DZI_PASSWORD=

DZI_BASE_URL=https://dss.pathflowdx.com
DZI_STORAGE_TYPE=minio

DZI_QUEUE_TYPE=app
DZI_INFINITE_LOOP=true
DZI_CALCULATE_FILES=true

############################################################
# MINIO ACCESS (USED BY APP & DZI)
############################################################
AWS_ACCESS_KEY_ID=minio
AWS_SECRET_ACCESS_KEY=minio_onward
AWS_DEFAULT_REGION=
AWS_REGION=

# AWS/S3 Endpoints - IMPORTANT: Some need /bucket, some don't
AWS_ENDPOINT=https://dss.pathflowdx.com:9009
S3_ENDPOINT=https://dss.pathflowdx.com:9009/pathflowdxtest
S3_ENDPOINT_FINE_UPLOADER=https://dss.pathflowdx.com:9009
S3_SERVICE_ENDPOINT=https://dss.pathflowdx.com:9009

MINIO_ALIAS=dzi-minio
MINIO_ENDPOINT_REPLACEMENT=https://dss.pathflowdx.com:9009
MINIO_STATS_API=https://dss.pathflowdx.com:9009

############################################################
# EXTERNAL / API CONFIG
############################################################
API_KEY="replace-with-secure-api-key"
DEFAULT_LOGO=/images/page-logo.png

############################################################
# NGINX / DOMAIN / SSL
############################################################
NGINX_SERVER_NAME=dss.pathflowdx.com

NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

ENABLE_SSL=true
CERTBOT_EMAIL=gouse@bitflexst.com

############################################################
# NGINX ADVANCED SETTINGS
############################################################
# Client upload settings
NGINX_CLIENT_MAX_BODY_SIZE=0
NGINX_PROXY_REQUEST_BUFFERING=off
NGINX_PROXY_BUFFERING=off
NGINX_PROXY_MAX_TEMP_FILE_SIZE=0

# Proxy timeout settings (in seconds)
NGINX_PROXY_CONNECT_TIMEOUT=600
NGINX_PROXY_SEND_TIMEOUT=600
NGINX_PROXY_READ_TIMEOUT=600

# Log file paths
NGINX_ACCESS_LOG=/data/logs/nginx/pathflowdx_access.log
NGINX_ERROR_LOG=/data/logs/nginx/pathflowdx_error.log
NGINX_MINIO_ACCESS_LOG=/data/logs/nginx/pathflowdx_minio_access.log
NGINX_MINIO_ERROR_LOG=/data/logs/nginx/pathflowdx_minio_error.log

# CORS settings for MinIO
NGINX_CORS_ALLOW_METHODS="GET, POST, PUT, DELETE, OPTIONS"
NGINX_CORS_MAX_AGE=3600

############################################################
# DOCKER NETWORK
############################################################
DOCKER_NETWORK_NAME=onward-network
DOCKER_NETWORK_DRIVER=bridge


############################################################
# DOCKER REGISTRY (OPTIONAL)
############################################################
DOCKER_REGISTRY=docker.io
DOCKER_USERNAME=
DOCKER_PASSWORD=

############################################################
# DOCKER DEPLOYMENT CONTROLS
############################################################
DOCKER_COMPOSE_PULL=true
DOCKER_FORCE_REBUILD=false


############################################################
# SSH ACCESS
############################################################
SSH_PORT=22
SSH_USER=onward
SSH_KEYS_DIR=/opt/ssh_keys

############################################################
# BACKUPS (DATABASE & LOGS)
############################################################
BACKUP_BASE_DIR=/data

# Database backup configuration
DB_BACKUP_DIR=/data/backup/db
DB_BACKUP_RETENTION_DAYS=7
DB_BACKUP_TIME=02:00
DELETE_DB_BACKUPS_AFTER_RETENTION=true

# Log backup configuration
LOG_BACKUP_DIR=/data/backup/logs
LOG_BACKUP_RETENTION_DAYS=14
LOG_BACKUP_TIME=02:30
DELETE_LOG_BACKUPS_AFTER_RETENTION=true

############################################################
# FIREWALL
############################################################
ENABLE_FIREWALL=false


